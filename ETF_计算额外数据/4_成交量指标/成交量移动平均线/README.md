# 📊 成交量移动平均线 (Volume Moving Average)

## 💡 指标概述
成交量移动平均线是对成交量数据进行平滑处理的客观技术指标，用于量化成交量趋势变化和识别异常交易活跃度，为短中期交易提供客观的量能分析基础。

## 🎯 适用市场: 中国A股ETF短中期交易

## 📈 核心指标配置

### 短期成交量均线
- **VMA_5**: 5日成交量移动平均线 - 短期量能趋势
- **VMA_10**: 10日成交量移动平均线 - 短期基准线

### 中期成交量均线  
- **VMA_20**: 20日成交量移动平均线 - 中期量能基准

## ⚙️ 计算公式

### 基本VMA计算
```
VMA_N = Σ(Volume_i) / N
其中：
- Volume_i: 第i个交易日的成交量(手数)
- N: 计算周期(5, 10, 20)
- i: 从当前日期往前推N个交易日
```


### 量能比率
```
Volume_Ratio_N = Current_Volume / VMA_N  
其中 N ∈ {5, 10, 20}
```

### 趋势量化
```
Volume_Trend_Short = VMA_5 / VMA_10
Volume_Trend_Medium = VMA_10 / VMA_20
```

### 量能变化率
```  
Volume_Change_Rate = (V_today - V_yesterday) / V_yesterday
```

### 相对活跃度
```
Volume_Activity_Score = (当日成交量排名 / 20) × 100%
其中排名基于过去20个交易日的成交量大小
```

## 📊 输出字段(核心完整版)

### 基础均线字段
- `vma_5`: 5日成交量均线(手数) 
- `vma_10`: 10日成交量均线(手数)
- `vma_20`: 20日成交量均线(手数)

### 核心比率字段  
- `volume_ratio_5`: 当日成交量/5日均线 (短期量比)
- `volume_ratio_10`: 当日成交量/10日均线 (中短期量比)
- `volume_ratio_20`: 当日成交量/20日均线 (中期量比)

### 趋势判断字段
- `volume_trend_short`: VMA_5/VMA_10 (短期量能趋势)
- `volume_trend_medium`: VMA_10/VMA_20 (中期量能趋势)

### 量能变化率
- `volume_change_rate`: (当日成交量-昨日成交量)/昨日成交量 (日变化率)

### 相对活跃度
- `volume_activity_score`: 当日成交量在过去20日中的排名百分比

## 📏 数据解读参考(符合中国A股实践)

### 成交量相对水平(基于量比实证标准)
- **温和放量**: 1.5 ≤ volume_ratio_20 < 2.5 
- **明显放量**: 2.5 ≤ volume_ratio_20 < 5.0
- **正常成交**: 0.8 ≤ volume_ratio_20 < 1.5 
- **成交萎缩**: 0.5 ≤ volume_ratio_20 < 0.8
- **严重缩量**: volume_ratio_20 < 0.5

### 趋势判断参考
- **短期量能增强**: volume_trend_short > 1.05
- **短期量能减弱**: volume_trend_short < 0.95
- **中期量能增强**: volume_trend_medium > 1.1  
- **中期量能减弱**: volume_trend_medium < 0.9

### 活跃度评级
- **极度活跃**: volume_activity_score > 90%
- **活跃**: 70% ≤ volume_activity_score ≤ 90%
- **一般**: 30% ≤ volume_activity_score < 70%
- **低迷**: volume_activity_score < 30%

## 🎯 数据依赖

### 必需数据字段
- **成交量(手数)**: 每日成交量数据
- **交易日期**: 用于时间序列计算
- **数据周期**: 至少需要40个交易日历史数据

### 数据质量要求
- 成交量数据完整性 > 95%
- 异常值处理: 剔除成交量为0的数据点
- 数据精度: 整数手数

## ⚡ 计算特性

### 性能优化
- **增量计算**: 支持单日增量更新
- **滑动窗口**: 使用高效的滑动窗口算法
- **内存优化**: 只保留必要的历史数据

### 计算复杂度
- **时间复杂度**: O(1) - 增量计算
- **空间复杂度**: O(N) - N为最大周期数
- **数据延迟**: 当日收盘后即可计算

## 📏 精度标准
- **小数位数**: 均线保留2位小数
- **比率精度**: 保留4位小数
- **标准化**: 保留6位小数

## 🔧 参数优化建议

### 中国A股市场特点
- **短期周期**: 5日、10日适合T+1交易制度
- **中期周期**: 20日、30日契合月度交易习惯
- **避免长期**: 不使用60日以上周期，不适合短中期交易

### 计算优化
- **异常值过滤**: 自动过滤成交量异常日(停牌、极端事件)
- **节假日处理**: 自动跳过非交易日
- **数据补全**: 自动处理缺失数据

## 📈 应用说明
本指标仅提供客观的成交量量化数据，不包含任何主观判断或策略建议。所有输出均为标准化数值，便于量化系统直接使用和进一步分析。

## 🚀 系统集成
- **兼容性**: 支持所有ETF代码
- **扩展性**: 支持自定义周期参数
- **稳定性**: 异常数据自动处理 