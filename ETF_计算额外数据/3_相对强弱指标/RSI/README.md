# RSI (相对强弱指数)

## 指标概述
RSI由韦尔斯·怀尔德(J. Welles Wilder Jr.)于1978年开发，通过比较一段时期内的平均收盘涨数和平均收盘跌数来计算相对强弱程度。该指标提供客观的数值参考，为ETF数据筛选提供量化依据。

## 包含指标

### 核心RSI指标  
- **rsi_6**: 6日相对强弱指数
- **rsi_12**: 12日相对强弱指数
- **rsi_24**: 24日相对强弱指数

### 差值与变化率指标
- **rsi_diff_6_24**: RSI6与RSI24的差值
- **rsi_change_rate**: RSI12相对前一日的变化率

## 计算公式

### RSI基础计算
```
RS = 平均涨幅 / 平均跌幅
RSI = 100 - (100 / (1 + RS))

其中：
平均涨幅 = N日内正收益的平均值
平均跌幅 = N日内负收益绝对值的平均值
N = 计算周期参数

取值范围：0 到 100
```

### 涨跌幅分离处理
```
如果当日涨跌幅 > 0:
    涨幅 = 涨跌幅, 跌幅 = 0
如果当日涨跌幅 ≤ 0:
    涨幅 = 0, 跌幅 = |涨跌幅|
```

### 衍生指标计算
```
rsi_diff_6_24 = rsi_6 - rsi_24
rsi_change_rate = (今日RSI12 - 昨日RSI12) / 昨日RSI12 × 100
```

## 数据特征分析

### 数值范围特征
- **取值范围**: 0到100
- **数值分布**: 通常在20-80之间波动
- **极值情况**: 接近0或100时表示极端状态

### 指标敏感度对比
```
周期越短，敏感度越高:
RSI6 > RSI12 > RSI24 (敏感度递减)

差值数值含义:
rsi_diff_6_24 > 0  → 短期数值高于长期
rsi_diff_6_24 < 0  → 短期数值低于长期
```

### 变化率分析  
- **rsi_change_rate**: 反映RSI12的日间变化幅度
  - 正值: 数值上升
  - 负值: 数值下降
  - 绝对值越大表示变化越剧烈

## 数据计算实例

### 基础计算示例
```python
# RSI指标计算
def calculate_rsi(price_changes, period):
    """
    计算RSI相对强弱指数
    """
    # 分离涨跌幅
    gains = price_changes.where(price_changes > 0, 0)
    losses = -price_changes.where(price_changes < 0, 0)
    
    # 计算平均涨跌幅
    avg_gains = gains.rolling(period).mean()
    avg_losses = losses.rolling(period).mean()
    
    # 避免除零
    rs = avg_gains / avg_losses.replace(0, np.nan)
    rsi = 100 - (100 / (1 + rs))
    
    return rsi.round(8)  # 8位小数精度

# 差值计算
def calculate_rsi_diff(rsi_6, rsi_24):
    """
    计算RSI差值
    """
    diff = rsi_6 - rsi_24
    return diff.round(8)

# 变化率计算
def calculate_rsi_change_rate(rsi):
    """
    计算RSI变化率
    """
    change_rate = (rsi - rsi.shift(1)) / rsi.shift(1) * 100
    return change_rate.round(8)
```

## 参数设置说明

### 短期参数 (RSI6)
- **计算周期**: 6个交易日
- **敏感度**: 高，对价格变化反应快速
- **数据特点**: 波动较大，噪音相对较多
- **适用情况**: 短期数据分析

### 标准参数 (RSI12)  
- **计算周期**: 12个交易日
- **敏感度**: 中等，平衡性较好
- **数据特点**: 相对稳定，实用性强
- **适用情况**: 通用数据分析

### 长期参数 (RSI24) 
- **计算周期**: 24个交易日
- **敏感度**: 较低，数值相对稳定
- **数据特点**: 平滑度高，波动较小
- **适用情况**: 长期数据分析

## 数据质量要求

### 计算数据需求
- **最少数据量**: 24个交易日(满足RSI24计算)
- **建议数据量**: 60个交易日(保证计算稳定性)
- **数据精度**: 8位小数
- **日期格式**: YYYY-MM-DD

### 数据缺失处理
- **停牌日**: 跳过计算，保持前一日数值
- **新上市ETF**: 等待数据积累后再计算
- **数据异常**: 自动检测和标记异常值

### 计算性能指标
- **单ETF计算时间**: < 5ms
- **批量处理能力**: 800+ ETF/分钟
- **内存占用**: < 80MB
- **缓存命中率**: 96%+

## 注意事项

### 1. 数据计算限制
- **新上市ETF**: 历史数据不足，指标可能不稳定
- **停牌复牌**: 价格不连续会影响计算精度
- **数据缺失**: 需要对缺失数据进行适当处理

### 2. 指标特性限制
- **滞后性**: RSI基于历史数据，存在滞后性
- **极值持续**: 在强趋势中可能长期处于极值区域
- **计算依赖**: 依赖于涨跌幅数据的准确性

### 3. 使用场景限制
- **仅作筛选参考**: 不应单独作为决策依据
- **结合其他指标**: 需要与其他数据综合分析
- **数据质量敏感**: 对原始数据质量要求较高

## 筛选应用场景

### 数值筛选条件
- **高数值筛选**: RSI值高于特定阈值
- **低数值筛选**: RSI值低于特定阈值
- **差值筛选**: 通过rsi_diff_6_24筛选差异程度
- **变化率筛选**: 通过rsi_change_rate筛选变化幅度
- **多周期筛选**: 多个周期RSI同时满足条件

### 筛选组合示例
```
高数值筛选:
- rsi_12 > 70
- rsi_diff_6_24 > 10
- rsi_change_rate > 2

低数值筛选:
- rsi_12 < 30
- rsi_6 > rsi_12 > rsi_24
- rsi_change_rate > 3

稳定数值筛选:
- 40 < rsi_12 < 60
- abs(rsi_diff_6_24) < 10
- abs(rsi_change_rate) < 3
```

## 输出字段

### RSI指标数据字段
```csv
code,date,rsi_6,rsi_12,rsi_24,rsi_diff_6_24,rsi_change_rate
```

#### 字段说明
- `code`: ETF代码
- `date`: 计算日期 (YYYY-MM-DD格式)
- `rsi_6`: 6日相对强弱指数 (范围: 0 到 100)
- `rsi_12`: 12日相对强弱指数 (范围: 0 到 100)
- `rsi_24`: 24日相对强弱指数 (范围: 0 到 100)
- `rsi_diff_6_24`: RSI6与RSI24的差值
- `rsi_change_rate`: RSI12日变化率 (%)

## 系统集成要求

### 核心功能实现
1. **基础计算**: 实现rsi_6, rsi_12, rsi_24三个核心指标
2. **差值计算**: 实现rsi_diff_6_24的差值计算
3. **变化率计算**: 实现rsi_change_rate的日间变化计算
4. **数据验证**: 实现异常值检测和数据质量控制

### 数据存储要求
- **文件格式**: CSV格式，低空间占用
- **字段数量**: 5个数据字段 + 2个基础字段
- **存储空间**: 每个ETF约80KB(一年数据)
- **更新频率**: 日频更新，增量计算

### 性能目标
- **计算速度**: 800+ ETF/分钟
- **内存占用**: < 80MB
- **缓存命中**: 96%+
- **数据精度**: 8位小数

---

**RSI指标系统**: ✅ 数据计算完整 | ⚙️ 字段设计简洁 | 📈 筛选功能齐全